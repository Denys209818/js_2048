const t=document.querySelector(".button"),e=[...document.getElementsByClassName("field-cell")];function l(){let t=Math.ceil(Math.random()*(e.length-1));for(;e[t].classList.length>=2;)t=Math.floor(Math.random()*(e.length-1));let l=1===Math.round(Math.random())?4:2;e[t].classList.add(`field-cell--${l}`),e[t].textContent=l}t.addEventListener("click",n=>{if(t.classList.contains("start")&&(t.classList.remove("start"),t.classList.add("restart"),t.textContent="Restart"),t.classList.contains("restart"))for(let t=0;t<e.length;t++)e[t].classList.remove(`field-cell--${e[t].textContent}`),e[t].textContent="";l()}),document.addEventListener("keydown",t=>{t.preventDefault();let n=0;switch(t.key){case"ArrowLeft":for(let t=0;t<e.length;t++)if(e[t].classList.length>=2){let l=t%4,s=t;switch(l){case 1:case 2:case 3:for(;s%4>0&&e[s-1].classList.length<2;)e[s-1].classList.add(`field-cell--${e[s].textContent}`),e[s-1].textContent=e[s].textContent,e[s].classList.remove(`field-cell--${e[s].textContent}`),e[s].textContent="",n++,s--;if(s%4>0&&e[s-1].textContent===e[s].textContent&&!e[s-1].getAttribute("data-merged")){let t=2*e[s-1].textContent,l=e[s].textContent;e[s-1].textContent=t,e[s-1].classList.remove(`field-cell--${t/2}`),e[s-1].setAttribute("data-merged",!0),e[s-1].classList.add(`field-cell--${t}`),e[s].classList.remove(`field-cell--${l}`),e[s].textContent="",n++}}}break;case"ArrowRight":for(let t=e.length-1;t>=0;t--)if(e[t].classList.length>=2){let l=t%4,s=t;switch(l){case 0:case 1:case 2:for(;s%4<(e.length-1)%4&&e[s+1].classList.length<2;)e[s+1].classList.add(`field-cell--${e[s].textContent}`),e[s+1].textContent=e[s].textContent,e[s].classList.remove(`field-cell--${e[s].textContent}`),e[s].textContent="",n++,s++;if(s%4<(e.length-1)%4&&e[s+1].textContent===e[s].textContent&&!e[s+1].getAttribute("data-merged")){let t=2*e[s+1].textContent,l=e[s].textContent;e[s+1].textContent=t,e[s+1].classList.remove(`field-cell--${t/2}`),e[s+1].classList.add(`field-cell--${t}`),e[s+1].setAttribute("data-merged",!0),e[s].classList.remove(`field-cell--${l}`),e[s].textContent="",n++}}}break;case"ArrowUp":for(let t=0;t<e.length;t++)if(e[t].classList.length>=2&&t>=4){let l=t;for(;l>=4&&e[l-4].classList.length<2;)e[l-4].classList.add(`field-cell--${e[l].textContent}`),e[l-4].textContent=e[l].textContent,e[l].classList.remove(`field-cell--${e[l].textContent}`),e[l].textContent="",n++,l-=4;if(l>=4&&e[l-4].textContent===e[l].textContent&&!e[l-4].getAttribute("data-merged")){let t=2*e[l-4].textContent,s=e[l].textContent;e[l-4].textContent=t,e[l-4].classList.remove(`field-cell--${t/2}`),e[l-4].classList.add(`field-cell--${t}`),e[l-4].setAttribute("data-merged",!0),e[l].classList.remove(`field-cell--${s}`),e[l].textContent="",n++}}break;case"ArrowDown":for(let t=e.length-1;t>=0;t--)if(e[t].classList.length>=2&&t<e.length-4){let l=t;for(;l<e.length-4&&e[l+4].classList.length<2;)e[l+4].classList.add(`field-cell--${e[l].textContent}`),e[l+4].textContent=e[l].textContent,e[l].classList.remove(`field-cell--${e[l].textContent}`),e[l].textContent="",n++,l+=4;if(l<e.length-4&&e[l+4].textContent===e[l].textContent&&!e[l+4].getAttribute("data-merged")){let t=2*e[l+4].textContent,s=e[l].textContent;e[l+4].textContent=t,e[l+4].classList.remove(`field-cell--${t/2}`),e[l+4].classList.add(`field-cell--${t}`),e[l+4].setAttribute("data-merged",!0),e[l].classList.remove(`field-cell--${s}`),e[l].textContent="",n++}}}0!==n&&l(),function(){for(let t of document.querySelectorAll("[data-merged=true]"))t.removeAttribute("data-merged")}()});
//# sourceMappingURL=index.81161d3b.js.map
